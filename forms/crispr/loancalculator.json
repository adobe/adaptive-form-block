{
    "adaptiveform": "0.10.0",
    "metadata": {
        "grammar": "json-formula-1.0.0",
        "version": "1.0.0"
    },
    "properties": {
        "vatratecal": "0.15",
        "maxncafee": "1050",
        "basencafee": "1000",
        "partncalfee": "165",
        "percent1ncafee": "0.1",
        "percent2ncafee": "0.15",
        "monthlyServiceFeeExclVATcal": "60",
        "insuranceMultipliercal": "0.0035",
        "monthwise": "1200"
    },
    "rules": {
        "properties": "merge($properties,{part1: (loanAmount + min([($properties.partncalfee + (loanAmount - $properties.basencafee) * $properties.percent1ncafee), (loanAmount * $properties.percent2ncafee), $properties.maxncafee]) * (1 + $properties.vatratecal))},{part2: $properties.monthlyServiceFeeExclVATcal * (1 + $properties.vatratecal)})"
    },
    "items": [
        {
            "name": "loanAmount",
            "description": "Enter an amount between R2,000 and R300,000",
            "type": "number",
            "default": "2000",
            "required": true,
            "minimum": "2000",
            "maximum": "300000",
            "constraintMessages": {
                "required": "Please fill in this field.",
                "minimum": "Enter an amount of 2,000 or more",
                "maximum": "Enter an amount less than 300,000"
            },
            "label": {
                "value": "How much do you want to borrow?"
            }
        },
        {
            "name": "term",
            "fieldType": "slider",
            "type": "number",
            "default": "2",
            "required": true,
            "minimum": "1",
            "maximum": "6",
            "constraintMessages": {
                "required": "Please fill in this field."
            },
            "label": {
                "value": "What’s your preferred repayment term?"
            }
        },
        {
            "name": "rateDisplay",
            "type": "string",
            "readOnly": "true",
            "style": "readOnly",
            "constraintMessages": {
                "required": "Please fill in this field."
            },
            "label": {
                "value": "Example interest rate"
            },
            "rules": {
                "value": "rate & '%'"
            },
            "required": false
        },
        {
            "name": "exploreRate",
            "fieldType": "checkbox",
            "type": "boolean",
            "constraintMessages": {
                "required": "Please fill in this field."
            },
            "label": {
                "value": "Explore rate"
            },
            "required": false,
            "enum": [
                "on"
            ]
        },
        {
            "name": "rate",
            "fieldType": "slider",
            "type": "number",
            "default": "18.25",
            "minimum": "8.25",
            "maximum": "25.75",
            "visible": "false",
            "constraintMessages": {
                "required": "Please fill in this field."
            },
            "label": {
                "value": "Rate of interest"
            },
            "rules": {
                "visible": "exploreRate == true()"
            },
            "required": false
        },
        {
            "name": "insuranceOption",
            "fieldType": "radio",
            "type": "number",
            "default": "8.07",
            "enum": [
                "8.07",
                "0"
            ],
            "enumNames": [
                "Add R8.07 to the loan amount for insurance",
                "I have my own insurance"
            ],
            "constraintMessages": {
                "required": "Please fill in this field."
            },
            "label": {
                "value": "Include insurance in your repayment"
            },
            "required": false
        },
        {
            "name": "emi",
            "readOnly": "true",
            "style": "readOnly",
            "constraintMessages": {
                "required": "Please fill in this field."
            },
            "label": {
                "value": "How much you’ll pay back each month"
            },
            "rules": {
                "value": "round($form.$properties.part2 + (rate / $form.$properties.monthwise * ($form.$properties.part1 + rate / $form.$properties.monthwise * $form.$properties.part1 + $form.$properties.part2) / (1 - power(1 + rate / $form.$properties.monthwise, -1 * (12 *term)))),2)"
            },
            "required": false
        },
        {
            "name": "total",
            "readOnly": "true",
            "style": "readOnly",
            "constraintMessages": {
                "required": "Please fill in this field."
            },
            "label": {
                "value": "How much you’ll pay back in total"
            },
            "rules": {
                "value": "round (12 * term * emi, 2)"
            },
            "required": false
        },
        {
            "name": "insuranceAmount",
            "readOnly": "true",
            "style": "readOnly",
            "constraintMessages": {
                "required": "Please fill in this field."
            },
            "label": {
                "value": "Insurance Amount"
            },
            "rules": {
                "value": "round($form.$properties.insuranceMultipliercal * $form.$properties.part1,2)"
            },
            "required": false
        }
    ],
    "action": "/personalloan"
}