{
    "adaptiveform": "0.10.0",
    "metadata": {
        "grammar": "json-formula-1.0.0",
        "version": "1.0.0"
    },
    "properties": {},
    "rules": {},
    "items": [
        {
            "name": "loanAmount",
            "description": "Enter an amount between R2,000 and R300,000",
            "type": "number",
            "default": "2000",
            "required": true,
            "minimum": "2000",
            "maximum": "300000",
            "constraintMessages": {
                "required": "Please fill in this field.",
                "minimum": "Enter an amount of 2,000 or more",
                "maximum": "Enter an amount less than 300,000"
            },
            "label": {
                "value": "How much do you want to borrow?"
            }
        },
        {
            "name": "term",
            "fieldType": "slider",
            "type": "number",
            "default": "2",
            "required": true,
            "minimum": "1",
            "maximum": "6",
            "constraintMessages": {
                "required": "Please fill in this field."
            },
            "label": {
                "value": "What’s your preferred repayment term?"
            }
        },
        {
            "name": "rateDisplay",
            "type": "string",
            "readOnly": "true",
            "constraintMessages": {
                "required": "Please fill in this field."
            },
            "label": {
                "value": "Example interest rate"
            },
            "rules": {
                "value": "rate & '%'"
            },
            "required": false
        },
        {
            "name": "exploreRate",
            "fieldType": "checkbox",
            "type": "boolean",
            "constraintMessages": {
                "required": "Please fill in this field."
            },
            "label": {
                "value": "Explore rate"
            },
            "required": false,
            "enum": [
                "on"
            ]
        },
        {
            "name": "rate",
            "fieldType": "slider",
            "type": "number",
            "default": "18.25",
            "minimum": "8.25",
            "maximum": "25.75",
            "visible": "false",
            "constraintMessages": {
                "required": "Please fill in this field."
            },
            "label": {
                "value": "Rate of interest"
            },
            "rules": {
                "visible": "exploreRate == true()"
            },
            "required": false
        },
        {
            "name": "insuranceOption",
            "fieldType": "radio",
            "type": "number",
            "default": "8.07",
            "enum": [
                "8.07",
                "0"
            ],
            "enumNames": [
                "Add R8.07 to the loan amount for insurance",
                "I have my own insurance"
            ],
            "constraintMessages": {
                "required": "Please fill in this field."
            },
            "label": {
                "value": "Include insurance in your repayment"
            },
            "rules": {
                "enum": "[insuranceAmount & '', 0]",
                "enumNames": "['Add R' & insuranceAmount & ' to the loan amount for insurance', 'I have my own insurance']"
            },
            "required": false
        },
        {
            "name": "emi",
            "readOnly": "true",
            "style": "custom-style",
            "constraintMessages": {
                "required": "Please fill in this field."
            },
            "label": {
                "value": "How much you’ll pay back each month"
            },
            "rules": {
                "value": "round(part2 + (rate / monthwise * (part1 + rate / monthwise * part1 + part2) / (1 - power(1 + rate / monthwise, -1 * (12 *term)))),2)"
            },
            "required": false
        },
        {
            "name": "total",
            "readOnly": "true",
            "style": "custom-style",
            "constraintMessages": {
                "required": "Please fill in this field."
            },
            "label": {
                "value": "How much you’ll pay back in total"
            },
            "rules": {
                "value": "round (12 * term * emi, 2)"
            },
            "required": false
        },
        {
            "name": "insuranceAmount",
            "fieldType": "hidden",
            "readOnly": "true",
            "style": "custom-style",
            "constraintMessages": {
                "required": "Please fill in this field."
            },
            "label": {
                "value": "Insurance Amount"
            },
            "rules": {
                "value": "round(insuranceMultipliercal * part1,2)"
            },
            "required": false
        },
        {
            "name": "vatratecal",
            "fieldType": "hidden",
            "default": "0.15",
            "constraintMessages": {
                "required": "Please fill in this field."
            },
            "required": false
        },
        {
            "name": "maxncafee",
            "fieldType": "hidden",
            "default": "1050",
            "constraintMessages": {
                "required": "Please fill in this field."
            },
            "required": false
        },
        {
            "name": "basencafee",
            "fieldType": "hidden",
            "default": "1000",
            "constraintMessages": {
                "required": "Please fill in this field."
            },
            "required": false
        },
        {
            "name": "partncalfee",
            "fieldType": "hidden",
            "default": "165",
            "constraintMessages": {
                "required": "Please fill in this field."
            },
            "required": false
        },
        {
            "name": "percent1ncafee",
            "fieldType": "hidden",
            "default": "0.1",
            "constraintMessages": {
                "required": "Please fill in this field."
            },
            "required": false
        },
        {
            "name": "percent2ncafee",
            "fieldType": "hidden",
            "default": "0.15",
            "constraintMessages": {
                "required": "Please fill in this field."
            },
            "required": false
        },
        {
            "name": "monthlyServiceFeeExclVATcal",
            "fieldType": "hidden",
            "default": "60",
            "constraintMessages": {
                "required": "Please fill in this field."
            },
            "required": false
        },
        {
            "name": "insuranceMultipliercal",
            "fieldType": "hidden",
            "default": "0.0035",
            "constraintMessages": {
                "required": "Please fill in this field."
            },
            "required": false
        },
        {
            "name": "monthwise",
            "fieldType": "hidden",
            "default": "1200",
            "constraintMessages": {
                "required": "Please fill in this field."
            },
            "required": false
        },
        {
            "name": "part1",
            "fieldType": "hidden",
            "constraintMessages": {
                "required": "Please fill in this field."
            },
            "rules": {
                "value": "(loanAmount + min([(partncalfee + (loanAmount - basencafee) * percent1ncafee), (loanAmount * percent2ncafee), maxncafee]) * (1 + vatratecal))"
            },
            "required": false
        },
        {
            "name": "part2",
            "fieldType": "hidden",
            "constraintMessages": {
                "required": "Please fill in this field."
            },
            "rules": {
                "value": "monthlyServiceFeeExclVATcal * (1 + vatratecal)"
            },
            "required": false
        },
        {
            "name": "part3",
            "fieldType": "hidden",
            "constraintMessages": {
                "required": "Please fill in this field."
            },
            "required": false
        }
    ],
    "action": "/personalloan"
}